<!DOCTYPE html>
<html>
<head>
	<title>Playwire</title>
</head>
<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
<body>

<input type="" name=""><button>+</button>
<p></p>

<script type="text/javascript">

var main = function(){

	// variables
	var $input = $('input'), 
		$button = $('button'), 
		$replaceP = $('p');

	var inputVal, 
		playwireLink;


	// on click event
	$button.on('click', function(){
		checkValidInput();
	});

	// on enter keypress
	$input.on('keypress', function(event){
		if (event.keyCode === 13) {
			checkValidInput();
		}
	});



	// check for valid input
	var checkValidInput = function(){
		
		inputVal = $input.val();
		var inputIndex = inputVal.indexOf('config.playwire.com');	

		if (inputIndex >= 0) {
			playwireLink = inputVal;
			changeUrl(inputIndex);
		} else if (inputVal === '') {
			$replaceP.html('empty input');
		} else {
			$replaceP.html('not a playwire link');
		}

	};


	// change the url into downloadable version
	var changeUrl = function(inputIndex){

		// grab first value
		var firstVal = playwireLink.substring(inputIndex + 20, inputIndex + 25);

		// grab the second value
		var secondVal = playwireLink.substring(inputIndex + 36, inputIndex + 43); 
		// NOTE: is the second value always 7 character? maybe use indexOf to find the zeus.json and videos/v2/ and work backwards from there?

		// compile values into URL
		var compiledUrl = 'https://cdn.video.playwire.com/' + firstVal + '/videos/' + secondVal + '/video-sd.mp4';
		
		$replaceP.html('<a href="' + compiledUrl + '">Download</a>');

	};

};

$(document).ready(main);

</script>

</body>
</html>