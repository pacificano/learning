<!DOCTYPE html>
<html>
<head>
	<title>Chapter 10: Functions</title>
</head>
<body>

<script type="text/javascript">

	// function declaration
	function quack(num) {
		for (var i = 0; i < num; i++) {
			console.log("Quack!"); 
		}
	} 
	
	quack(3);



	// function expression
	var fly = function(num) {
		for (var i = 0; i < num; i++) {
			console.log("Flying!"); 
		}
	};

	fly(3);



	var passengers = [  
		{ name: "Jane Doloop", paid: true, ticket: "coach" },
		{ name: "Dr. Evel", paid: true, ticket: "firstclass" },
		{ name: "Sue Property", paid: false, ticket: "firstclass" },
		{ name: "John Funcall", paid: true, ticket: "premium" } 
	];



	function processPassengers(passengers, test) {
		for (var i = 0; i < passengers.length; i++) {
			if (test(passengers[i])) {
				return false;
			}
		}
		return true;
	}


	function checkNoFlyList(doesntmatter) {
		return (doesntmatter.name === "Dr. Evel");
	}


	function checkNotPaid(doesntmatter) {
		return (!doesntmatter.paid);
	}


	function printPassenger(doesntmatter) {
		var message = doesntmatter.name;
		if (doesntmatter.paid) {
			message = message + " has paid";
		} else {
			message = message + " has not paid";
		}
		console.log(message);
		return false;
	}


	var allCanFly = processPassengers(passengers, checkNoFlyList);
		if (!allCanFly) {
			console.log("The plane can't take off: we have a passenger on the no fly list.");
		}

	var allPaid = processPassengers(passengers, checkNotPaid);
		if (!allPaid) {
			console.log("The plane can't take off: not everyone has paid.");
		}


	processPassengers(passengers, printPassenger);



	function createDrinkOrder(passenger) {
		var orderFunction;
		if (passenger.ticket === "firstclass") {
			orderFunction = function() {
				console.log("Would you like a cocktail or wine?");
			};
		} else if (passenger.ticket === "premium") {
			orderFunction = function() {
				console.log("Would you like wine, cola or water?");
			};
		} else {
			orderFunction = function() {
				console.log("Your choice is cola or water.");
			};
		}
		return orderFunction;
	}


	function createDinnerOrder(passenger) {
		var orderFunction;
		if (passenger.ticket === "firstclass") {
			orderFunction = function() {
				console.log("Would you like chicken or pasta?");
			};
		} else if (passenger.ticket === "premium") {
			orderFunction = function() {
				console.log("Would you like a snack box or cheese plate?");
			};
		} else {
			orderFunction = function() {
				console.log("Would you like peanuts or pretzels?");
			};
		}
		return orderFunction;
	}


	function pickupTrash() {
		console.log("Can I have your trash, please?");
	}


	function serveCustomer(passenger) {
		var getDrinkOrderFunction = createDrinkOrder(passenger);
		var getDinnerOrderFunction = createDinnerOrder(passenger);
		getDrinkOrderFunction();
		// get dinner order
		getDinnerOrderFunction();
		getDrinkOrderFunction();
		getDrinkOrderFunction();
		// show movie
		getDrinkOrderFunction();
		// pick up trash
		pickupTrash();
	}


	function servePassengers(passengers) {
		for (var i = 0; i < passengers.length; i++) {
			serveCustomer(passengers[i]);
		}
	}

	servePassengers(passengers);







	// sorting arrays
	var numbersArray = [60, 50, 62, 58, 54, 54];

	function compareNumbers(num1, num2) { 
		if (num1 > num2) {
			return 1;
		} else if (num1 === num2) {
			return 0;
		} else {
			return -1; 
		}
	}

	console.log(numbersArray);
	numbersArray.sort(compareNumbers); 
	console.log(numbersArray);



	var products = [
		{ name: "Grapefruit", calories: 170, color: "red", sold: 8200 }, 
		{ name: "Orange", calories: 160, color: "orange", sold: 12101 }, 
		{ name: "Cola", calories: 210, color: "caramel", sold: 25412 },
		{ name: "Diet Cola", calories: 0, color: "caramel", sold: 43922 }, 
		{ name: "Lemon", calories: 200, color: "clear", sold: 14983 },
		{ name: "Raspberry", calories: 180, color: "pink", sold: 9427 },
		{ name: "Root Beer", calories: 200, color: "caramel", sold: 9909 }, 
		{ name: "Water", calories: 0, color: "clear", sold: 62123 }
	];

	function compareSold(colaA, colaB) { 
		if (colaA.sold > colaB.sold) {
			return 1;
		} else if (colaA.sold === colaB.sold) {
			return 0;
		} else {
			return -1; 
		}
	}

	products.sort(compareSold);
	for (var i = 0; i < products.length; i++) {
		console.log(products[i].name + ' sold: ' + products[i].sold);
	}




</script>

</body>
</html>